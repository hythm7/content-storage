document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("drop-area"),t=document.getElementById("file-input");["dragenter","dragover","dragleave","drop"].forEach((function(t){e.addEventListener(t,(function(e){e.preventDefault(),e.stopPropagation()}))})),["dragenter","dragover"].forEach((function(t){e.addEventListener(t,(function(){e.classList.add("highlight")}))})),["dragleave","drop"].forEach((function(t){e.addEventListener(t,(function(){e.classList.remove("highlight")}))})),e.addEventListener("drop",(function(e){e.preventDefault(),e.stopPropagation();var n=e.dataTransfer.files;t.files=n,d(n)}));var n=document.getElementById("submit-button");function d(e){var t=document.querySelector(".form-label");e.length>0?(e=[...e],t.innerText="",e.forEach((e=>{t.innerText+=e.name+"\n"})),n.classList.remove("disabled")):(t.innerText="Drag and drop your distribution here or click to select a file.",n.classList.add("disabled"))}n.addEventListener("click",(function(){var e=t.files;console.log(e);for(var n=new FormData,d=0;d<e.length;d++)n.append("file-input",e[d]);fetch("/distribution/add",{method:"POST",body:n}).then((e=>{console.log("Upload successful:",e),window.location.reload()})).catch((e=>{console.error("Error uploading files:",e)}))})),t.addEventListener("change",(function(e){d(t.files)}));const o=new EventSource("/distribution/build");o.onerror=e=>{console.error("EventSource failed:",e)},o.addEventListener("message",(e=>{console.log(`message: ${e.data}`)}));const a=document.getElementById("buildModal"),r=a.querySelector(".modal-body");var i=function(e){const t=document.createElement("li");t.textContent=e.data,r.appendChild(t)};a.addEventListener("show.bs.modal",(e=>{var t=e.relatedTarget,n=(t.getAttribute("data-build-status"),t.getAttribute("data-build-id"));a.setAttribute("data-build-id",n),o.addEventListener(n,i,!1)})),a.addEventListener("hidden.bs.modal",(e=>{var t=a.getAttribute("data-build-id");o.removeEventListener(t,i,!1),a.querySelector(".modal-body").innerHTML=""}))}));