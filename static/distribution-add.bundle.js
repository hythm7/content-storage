(()=>{var e=document.getElementById("drop-area"),t=document.getElementById("distributions-archive-files"),n=document.getElementById("distributions-add");const r=document.getElementById("distribution-add-form");if(e){function d(e){var t=document.querySelector(".distributions-archive-files-label");e.length>0?(e=[...e],t.innerText="",e.forEach((e=>{t.innerText+=e.name+"\n"})),n.classList.remove("disabled")):(t.innerText="Drag and drop your distribution here or click to select a file.",n.classList.add("disabled"))}r.addEventListener("submit",(function(e){const t=e.currentTarget,n=new URL(t.action),r=new FormData(t),d=new URLSearchParams(r),a={method:t.method};"post"===t.method.toLowerCase()?"multipart/form-data"===t.enctype?a.body=r:a.body=d:n.search=d,fetch(n,a).catch((e=>{console.error("Error uploading files:",e)})),e.preventDefault()})),["dragenter","dragover","dragleave","drop"].forEach((function(t){e.addEventListener(t,(function(e){e.preventDefault(),e.stopPropagation()}))})),["dragenter","dragover"].forEach((function(t){e.addEventListener(t,(function(){e.classList.add("highlight")}))})),["dragleave","drop"].forEach((function(t){e.addEventListener(t,(function(){e.classList.remove("highlight")}))})),e.addEventListener("drop",(function(e){e.preventDefault(),e.stopPropagation();var n=e.dataTransfer.files;d(n),t.files=n})),t.addEventListener("change",(function(e){d(t.files)}));const o=new EventSource("/distribution/build");o.onerror=e=>{console.error("EventSource failed:",e)},o.addEventListener("message",(e=>{console.log(`message: ${e.data}`)}));const i=document.getElementById("buildModal"),s=i.querySelector(".modal-body");var a=function(e){const t=document.createElement("li");t.textContent=e.data,s.appendChild(t)};i.addEventListener("show.bs.modal",(e=>{var t=e.relatedTarget,n=(t.getAttribute("data-build-status"),t.getAttribute("data-build-id"));i.setAttribute("data-build-id",n),o.addEventListener(n,a,!1)})),i.addEventListener("hidden.bs.modal",(e=>{var t=i.getAttribute("data-build-id");o.removeEventListener(t,a,!1),i.querySelector(".modal-body").innerHTML=""}))}})();