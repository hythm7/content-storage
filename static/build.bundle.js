document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("buildLogModal"),t=e.querySelector(".modal-body"),d=new EventSource("/server-sent-events");d.onerror=e=>{console.error("EventSource failed:",e)},d.addEventListener("message",(e=>{var t,d,n,a,o=JSON.parse(e.data);"BUILD"==o.target&&"ADD"==o.operation&&(console.log("BUILD ADD"),t=o.build,n=(d=document.getElementById("distributions-builds-table").getElementsByTagName("tbody")[0]).innerHTML,a='<tr data-bs-toggle="modal" data-bs-target="#buildLogModal" data-build-id="'+t.id+'">',a+="<td>"+t.status+"</td>",a+="<td>"+t.username+"</td>",a+="<td>"+t.filename+"</td>",a+="</tr>",d.innerHTML=a+n)}));var n=function(e){const d=document.createElement("li");d.textContent=e.data,t.appendChild(d)};e.addEventListener("show.bs.modal",(e=>{var t=e.relatedTarget.getAttribute("data-build-id");d.addEventListener(t,n,!1)})),e.addEventListener("hidden.bs.modal",(t=>{var a=e.getAttribute("data-build-id");d.removeEventListener(a,n,!1),e.querySelector(".modal-body").innerHTML=""}))}));